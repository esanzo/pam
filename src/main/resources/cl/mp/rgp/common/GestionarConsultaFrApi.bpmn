<?xml version="1.0" encoding="UTF-8"?>
<bpmn2:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.omg.org/bpmn20" xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:bpsim="http://www.bpsim.org/schemas/1.0" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:drools="http://www.jboss.org/drools" id="_Qaze0JA4Ee2dJv5f1f9GTg" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd http://www.jboss.org/drools drools.xsd http://www.bpsim.org/schemas/1.0 bpsim.xsd http://www.omg.org/spec/DD/20100524/DC DC.xsd http://www.omg.org/spec/DD/20100524/DI DI.xsd " exporter="jBPM Process Modeler" exporterVersion="2.0" targetNamespace="http://www.omg.org/bpmn20">
  <bpmn2:itemDefinition id="_urlItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_tokenItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_datosItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_infofrItem" structureRef="cl.mp.rgp.common.model.InfoDm"/>
  <bpmn2:itemDefinition id="_respItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_consultaFiscalItem" structureRef="Integer"/>
  <bpmn2:itemDefinition id="_requiereRevisionFRItem" structureRef="Boolean"/>
  <bpmn2:itemDefinition id="_mensajeItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_resultadosItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_causaItem" structureRef="cl.mp.rgp.ingreso.model.Causa"/>
  <bpmn2:itemDefinition id="_usuarioItem" structureRef="cl.mp.rgp.common.model.PerfilamientoUsuarios"/>
  <bpmn2:itemDefinition id="_delitoItem" structureRef="cl.mp.rgp.flagrancia.model.Delito"/>
  <bpmn2:itemDefinition id="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_AcceptCharsetInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_AcceptHeaderInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_AuthTypeInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_AuthUrlInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_ConnectTimeoutInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_ContentDataInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_ContentTypeInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_ContentTypeCharsetInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_CookieInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_CookiePathInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_HandleResponseErrorsInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_HeadersInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_MethodInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_PasswordInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_ReadTimeoutInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_ResultClassInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_UrlInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_UsernameInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_ResultOutputXItem" structureRef="String"/>
  <bpmn2:process id="RGP.GestionarConsultaFrApi" drools:packageName="cl.mp.rgp.common" drools:version="1.0" drools:adHoc="false" name="GestionarConsultaFrApi" isExecutable="true" processType="Public">
    <bpmn2:property id="url" itemSubjectRef="_urlItem" name="url"/>
    <bpmn2:property id="token" itemSubjectRef="_tokenItem" name="token"/>
    <bpmn2:property id="datos" itemSubjectRef="_datosItem" name="datos"/>
    <bpmn2:property id="infofr" itemSubjectRef="_infofrItem" name="infofr"/>
    <bpmn2:property id="resp" itemSubjectRef="_respItem" name="resp"/>
    <bpmn2:property id="consultaFiscal" itemSubjectRef="_consultaFiscalItem" name="consultaFiscal"/>
    <bpmn2:property id="requiereRevisionFR" itemSubjectRef="_requiereRevisionFRItem" name="requiereRevisionFR"/>
    <bpmn2:property id="mensaje" itemSubjectRef="_mensajeItem" name="mensaje"/>
    <bpmn2:property id="resultados" itemSubjectRef="_resultadosItem" name="resultados"/>
    <bpmn2:property id="causa" itemSubjectRef="_causaItem" name="causa"/>
    <bpmn2:property id="usuario" itemSubjectRef="_usuarioItem" name="usuario"/>
    <bpmn2:property id="delito" itemSubjectRef="_delitoItem" name="delito"/>
    <bpmn2:sequenceFlow id="_8286B95D-C61C-4FB9-BB4F-86541A7C6FC8" sourceRef="_46C0D246-A9AB-4F49-A488-45793DB0A3CA" targetRef="_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4"/>
    <bpmn2:sequenceFlow id="_308D07E0-86BA-46A9-937D-72418EBA682A" sourceRef="_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4" targetRef="_CFB1964E-6849-451F-A3BC-8A8C87959A47">
      <bpmn2:extensionElements>
        <drools:metaData name="isAutoConnection.target">
          <drools:metaValue><![CDATA[true]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_87238C3D-480C-497B-BE0F-94221F76891D" sourceRef="_B7740553-17BD-49A5-AF53-35988FEC10B0" targetRef="_46C0D246-A9AB-4F49-A488-45793DB0A3CA">
      <bpmn2:extensionElements>
        <drools:metaData name="isAutoConnection.source">
          <drools:metaValue><![CDATA[true]]></drools:metaValue>
        </drools:metaData>
        <drools:metaData name="isAutoConnection.target">
          <drools:metaValue><![CDATA[true]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="_EF30ED44-1C2F-4464-9B5F-F20FACA14EDD" sourceRef="_CFB1964E-6849-451F-A3BC-8A8C87959A47" targetRef="_5A79EA59-00BD-49FA-9C07-B234FB6B6985"/>
    <bpmn2:task id="_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4" drools:taskName="Rest" name="RestConsultaFR">
      <bpmn2:documentation id="_Qaze0ZA4Ee2dJv5f1f9GTg"><![CDATA[jbpm-workitems-rest/index.html]]></bpmn2:documentation>
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[RestConsultaFR]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_8286B95D-C61C-4FB9-BB4F-86541A7C6FC8</bpmn2:incoming>
      <bpmn2:outgoing>_308D07E0-86BA-46A9-937D-72418EBA682A</bpmn2:outgoing>
      <bpmn2:ioSpecification id="_Qaze0pA4Ee2dJv5f1f9GTg">
        <bpmn2:dataInput id="_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_AcceptCharsetInputX" drools:dtype="String" itemSubjectRef="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_AcceptCharsetInputXItem" name="AcceptCharset"/>
        <bpmn2:dataInput id="_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_AcceptHeaderInputX" drools:dtype="String" itemSubjectRef="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_AcceptHeaderInputXItem" name="AcceptHeader"/>
        <bpmn2:dataInput id="_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_AuthTypeInputX" drools:dtype="String" itemSubjectRef="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_AuthTypeInputXItem" name="AuthType"/>
        <bpmn2:dataInput id="_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_AuthUrlInputX" drools:dtype="String" itemSubjectRef="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_AuthUrlInputXItem" name="AuthUrl"/>
        <bpmn2:dataInput id="_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_ConnectTimeoutInputX" drools:dtype="String" itemSubjectRef="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_ConnectTimeoutInputXItem" name="ConnectTimeout"/>
        <bpmn2:dataInput id="_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_ContentDataInputX" drools:dtype="String" itemSubjectRef="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_ContentDataInputXItem" name="ContentData"/>
        <bpmn2:dataInput id="_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_ContentTypeInputX" drools:dtype="String" itemSubjectRef="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_ContentTypeInputXItem" name="ContentType"/>
        <bpmn2:dataInput id="_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_ContentTypeCharsetInputX" drools:dtype="String" itemSubjectRef="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_ContentTypeCharsetInputXItem" name="ContentTypeCharset"/>
        <bpmn2:dataInput id="_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_CookieInputX" drools:dtype="String" itemSubjectRef="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_CookieInputXItem" name="Cookie"/>
        <bpmn2:dataInput id="_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_CookiePathInputX" drools:dtype="String" itemSubjectRef="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_CookiePathInputXItem" name="CookiePath"/>
        <bpmn2:dataInput id="_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_HandleResponseErrorsInputX" drools:dtype="String" itemSubjectRef="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_HandleResponseErrorsInputXItem" name="HandleResponseErrors"/>
        <bpmn2:dataInput id="_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_HeadersInputX" drools:dtype="String" itemSubjectRef="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_HeadersInputXItem" name="Headers"/>
        <bpmn2:dataInput id="_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_MethodInputX" drools:dtype="String" itemSubjectRef="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_MethodInputXItem" name="Method"/>
        <bpmn2:dataInput id="_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_PasswordInputX" drools:dtype="String" itemSubjectRef="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_PasswordInputXItem" name="Password"/>
        <bpmn2:dataInput id="_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_ReadTimeoutInputX" drools:dtype="String" itemSubjectRef="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_ReadTimeoutInputXItem" name="ReadTimeout"/>
        <bpmn2:dataInput id="_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_ResultClassInputX" drools:dtype="String" itemSubjectRef="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_ResultClassInputXItem" name="ResultClass"/>
        <bpmn2:dataInput id="_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_UrlInputX" drools:dtype="String" itemSubjectRef="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_UrlInputXItem" name="Url"/>
        <bpmn2:dataInput id="_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_UsernameInputX" drools:dtype="String" itemSubjectRef="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_UsernameInputXItem" name="Username"/>
        <bpmn2:dataInput id="_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_TaskNameInputX" drools:dtype="Object" name="TaskName"/>
        <bpmn2:dataOutput id="_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_ResultOutputX" drools:dtype="String" itemSubjectRef="__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_ResultOutputXItem" name="Result"/>
        <bpmn2:inputSet id="_Qaze05A4Ee2dJv5f1f9GTg">
          <bpmn2:dataInputRefs>_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_AcceptCharsetInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_AcceptHeaderInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_AuthTypeInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_AuthUrlInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_ConnectTimeoutInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_ContentDataInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_ContentTypeInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_ContentTypeCharsetInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_CookieInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_CookiePathInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_HandleResponseErrorsInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_HeadersInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_MethodInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_PasswordInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_ReadTimeoutInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_ResultClassInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_UrlInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_UsernameInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_TaskNameInputX</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="_Qaze1JA4Ee2dJv5f1f9GTg">
          <bpmn2:dataOutputRefs>_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_ResultOutputX</bpmn2:dataOutputRefs>
        </bpmn2:outputSet>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="_Qaze1ZA4Ee2dJv5f1f9GTg">
        <bpmn2:sourceRef>datos</bpmn2:sourceRef>
        <bpmn2:targetRef>_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_ContentDataInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Qaze1pA4Ee2dJv5f1f9GTg">
        <bpmn2:targetRef>_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_ContentTypeInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_Qaze15A4Ee2dJv5f1f9GTg">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Qaze2JA4Ee2dJv5f1f9GTg"><![CDATA[application/json]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Qaze2ZA4Ee2dJv5f1f9GTg">_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_ContentTypeInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Qaze2pA4Ee2dJv5f1f9GTg">
        <bpmn2:sourceRef>token</bpmn2:sourceRef>
        <bpmn2:targetRef>_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_HeadersInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Qaze25A4Ee2dJv5f1f9GTg">
        <bpmn2:targetRef>_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_MethodInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_Qaze3JA4Ee2dJv5f1f9GTg">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Qaze3ZA4Ee2dJv5f1f9GTg"><![CDATA[POST]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Qaze3pA4Ee2dJv5f1f9GTg">_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_MethodInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Qaze35A4Ee2dJv5f1f9GTg">
        <bpmn2:sourceRef>url</bpmn2:sourceRef>
        <bpmn2:targetRef>_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_UrlInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_Qaze4JA4Ee2dJv5f1f9GTg">
        <bpmn2:targetRef>_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_TaskNameInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_Qaze4ZA4Ee2dJv5f1f9GTg">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_Qaze4pA4Ee2dJv5f1f9GTg"><![CDATA[Rest]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_Qaze45A4Ee2dJv5f1f9GTg">_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_TaskNameInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataOutputAssociation id="_Qaze5JA4Ee2dJv5f1f9GTg">
        <bpmn2:sourceRef>_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_ResultOutputX</bpmn2:sourceRef>
        <bpmn2:targetRef>resp</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
    </bpmn2:task>
    <bpmn2:scriptTask id="_46C0D246-A9AB-4F49-A488-45793DB0A3CA" name="Datos Regla" scriptFormat="http://www.java.com/java">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[Datos Regla]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_87238C3D-480C-497B-BE0F-94221F76891D</bpmn2:incoming>
      <bpmn2:outgoing>_8286B95D-C61C-4FB9-BB4F-86541A7C6FC8</bpmn2:outgoing>
      <bpmn2:script><![CDATA[cl.mp.rgp.common.model.PerfilamientoUsuarios usuarioLocal = (cl.mp.rgp.common.model.PerfilamientoUsuarios)kcontext.getVariable("usuario");
String toke = usuarioLocal.getToken();
String ambien = usuarioLocal.getAmbiente();
String regi = usuarioLocal.getRegionId();

cl.mp.rgp.flagrancia.model.Delito delitoLocal = (cl.mp.rgp.flagrancia.model.Delito)kcontext.getVariable("delito");
String codDel = delitoLocal.getCodigoDelito();

String ap= "";
String scp= "SI";
String dnp= "";
String region= regi;//"9";//confrLocal.getRegion();
String codigoDelito= codDel;//confrLocal.getDelito();
String sd= "";
String abreviado= "";

String datosLocal = "{ \"objeto\": { \"com.rgprmexcel.confr.consultaFr\": { \"region\": \""+ region+"\",\"codigoDelito\": \""+codigoDelito+"\",\"scp\": \""+scp+"\",\"ap\": \"" + ap + "\",\"dnp\": \""+dnp+"\",\"sd\": \""+sd+"\",\"abreviado\": \""+abreviado+"\" } } ,\"outIdentifier\": \"consultaFr\" } ";

String urlLocal = "";

switch(ambien){
case "DES":
    urlLocal = "http://rgp-proxy-fud-rgp-backend-qa-2.apps.preprod.minpublico.cl/consulta-decision-manager/confr_1.0.0-SNAPSHOT";
    break;
case "QAS":
    urlLocal = "http://rgp-proxy-fud-rgp-backend-qa-2.apps.preprod.minpublico.cl/consulta-decision-manager/confr_1.0.0-SNAPSHOT";
    break;
case "PRD":
    urlLocal = "http://rgp-proxy-fud-rgp-backend-qa-2.apps.preprod.minpublico.cl/consulta-decision-manager/confr_1.0.0-SNAPSHOT";
    break;
}

String tok = "Authorization= " + toke;//eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJsYW9RSUlhV0dwbmN6LWFsVFVZblFLR3N5VWhkeXYwTHUwaWRTTElzZ1ZvIn0.eyJleHAiOjE2NzMyOTQxNDUsImlhdCI6MTY3MzIwNzc0NSwiYXV0aF90aW1lIjoxNjczMjA3NzQ1LCJqdGkiOiIwZGNlNWQ0NC00NjgwLTRhMDctYTlkYi0yNGNjMjQ2YTQ3ZWMiLCJpc3MiOiJodHRwczovL3Nzby1yaHNzby1yZ3AtZGV2LmFwcHMucHJlcHJvZC5taW5wdWJsaWNvLmNsL2F1dGgvcmVhbG1zL3JncCIsImF1ZCI6ImFjY291bnQiLCJzdWIiOiI2M2RjYjJhZi00NjM1LTQ4ZjEtOWY5MS01NjhkYjlhMDc4N2EiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJyaHBhbS1kZXNpZ24ta2llc2VydmVyLWNsaWVudCIsInNlc3Npb25fc3RhdGUiOiI5ZDc5MThmOS1lOGMyLTRiMTEtOGNjOS00MmJhZmMxYzNkZGEiLCJhY3IiOiIxIiwiYWxsb3dlZC1vcmlnaW5zIjpbImh0dHBzOi8vcmhwYW0tZGVzaWduLWtpZXNlcnZlci1yaHBhbS1kZXNpZ24tcmdwLWRldi5hcHBzLnByZXByb2QubWlucHVibGljby5jbDo0NDMiLCJodHRwczovL3JocGFtLWRlc2lnbi1raWVzZXJ2ZXItcmhwYW0tZGVzaWduLXJncC1kZXYuYXBwcy5wcmVwcm9kLm1pbnB1YmxpY28uY2wiXSwicmVhbG1fYWNjZXNzIjp7InJvbGVzIjpbInpvbmFfMl9maXNjYWxpYV85MDFfc29saWNpdGFudGVfR0NEIiwiZGVmYXVsdC1yb2xlcy1yZ3AiLCJ6b25hXzJfZmlzY2FsaWFfOTAxX2VqZWN1dG9yX21pc21hZmlzY2FsaWFfR0RTIiwiem9uYV8yX2Zpc2NhbGlhXzkwMV9kaWdpdGFkb3JfSVlBX09GSSIsInpvbmFfMl9maXNjYWxpYV85MDFfZmlzY2FsX0RJTiIsImFkbWluIiwiem9uYV8yX2Zpc2NhbGlhXzkwMV9maXNjYWxfR0NEIiwiem9uYV8yX2Zpc2NhbGlhXzkwMV9maXNjYWxfZXF1aXBvX0NDRCIsInpvbmFfMl9maXNjYWxpYV85MDFfZXF1aXBvX2p1cmlkaWNvX1RBVSIsInpvbmFfMl9maXNjYWxpYV85MDFfc2lzdGVtYV9lbmNhcmdhZG9fR0NEIiwib2ZmbGluZV9hY2Nlc3MiLCJ6b25hXzJfZmlzY2FsaWFfOTAxX2Zpc2NhbF9lcXVpcG9fR0NEIiwiem9uYV8yX2Zpc2NhbGlhXzkwMV9jdXN0b2Rpb19FWUQiLCJ6b25hXzJfZmlzY2FsaWFfOTAxX2Zpc2NhbF90dXJub19USU4iLCJ6b25hXzJfZmlzY2FsaWFfOTAxX2Zpc2NhbF9UUFQiLCJ1bWFfYXV0aG9yaXphdGlvbiIsImtpZS1zZXJ2ZXIiLCJ6b25hXzJfZmlzY2FsaWFfOTAxX2FwYWZfR0RTIiwia2llbWdtdCIsInpvbmFfMl9maXNjYWxpYV85MDFfZmlzY2FsX0VZRCIsInpvbmFfMl9maXNjYWxfamVmZSIsInpvbmFfMl9maXNjYWxpYV85MDFfYXRlbmRlZG9yX2p1cmlkaWNvX0lZQSIsInpvbmFfMl9maXNjYWxpYV85MDFfZXF1aXBvX2p1cmlkaWNvX1RQVCIsInpvbmFfMl9maXNjYWxpYV85MDFfZmlzY2FsX0dEUyIsInpvbmFfMl9maXNjYWxpYV85MDFfZmlzY2FsX2plZmVfQVNJIiwiem9uYV8yX2Zpc2NhbGlhXzkwMV9lcXVpcG9fanVyaWRpY29fR0RTIiwibWF2ZW4iLCJ6b25hXzJfZmlzY2FsaWFfOTAxX2Zpc2NhbF9qZWZlX1RQVCIsInpvbmFfMl9maXNjYWxpYV85MDFfZGlnaXRhZG9yX0lZQSIsInpvbmFfMl9maXNjYWxpYV85MDFfZGlnaXRhZG9yX0lZQV9GSVMiLCJ6b25hXzJfZmlzY2FsaWFfOTAxX3ByZWNsYXNpZmljYWRvcl9JWUEiLCJ6b25hXzJfZmlzY2FsaWFfOTAxX2VxdWlwb190dXJub2lmX1RJTiIsInpvbmFfMl9maXNjYWxpYV85MDFfZW5jYXJnYWRvX3Bvc3Rlcm1pbm9fVFBUIiwiem9uYV8yX2Zpc2NhbGlhXzkwMV9lcXVpcG9fanVyaWRpY29fRElOIiwicmVzdC1hbGwiLCJBZG1pbmlzdHJhdG9ycyIsInpvbmFfMl9maXNjYWxpYV85MDFfZnVuY2lvbmFyaW9fSVlBIiwiRmlzY2FsaWFfNV9hdGVuZGVkb3JfanVyaWRpY28iLCJ1c2VyIiwiem9uYV8yX2Zpc2NhbGlhXzkwMV9maXNjYWxfbGl0aWdhZG9yX1RBVSJdfSwicmVzb3VyY2VfYWNjZXNzIjp7ImFjY291bnQiOnsicm9sZXMiOlsibWFuYWdlLWFjY291bnQiLCJtYW5hZ2UtYWNjb3VudC1saW5rcyIsInZpZXctcHJvZmlsZSJdfX0sInNjb3BlIjoicHJvZmlsZSBlbWFpbCIsInNpZCI6IjlkNzkxOGY5LWU4YzItNGIxMS04Y2M5LTQyYmFmYzFjM2RkYSIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJuYW1lIjoicGFtLWFkbWluLWZpcnN0TmFtZSBwYW0tYWRtaW4tTGFzdE5hbWXDpyIsInByZWZlcnJlZF91c2VybmFtZSI6InBhbS1hZG1pbiIsImdpdmVuX25hbWUiOiJwYW0tYWRtaW4tZmlyc3ROYW1lIiwiZmFtaWx5X25hbWUiOiJwYW0tYWRtaW4tTGFzdE5hbWXDpyIsImVtYWlsIjoicGFtLWFkbWluQGFkbWluLmxvY2FsIn0.VzWOsRsLOhD5JKUvR6T9NFpRXTZgGnxJpbwYEvqnh2wfeaFd_rj5DeZDjSrC4ULIpPE5tIF9GeVlaerG-xWM9py0nAJbsIVX3IdyfvpZeOG8C6E827dEbj2TFrYNNUoCQLVJ8UDU4URCzq1JyoG8LVf-gdTom6_NSvrMYB-WA1RQi7sYowvDRP5r1ePjkTSvmuknQOSydc7uJ1tyGzUPWNaN1jqI9cwG_LTZ_9PD0hXaPlWG4-3Je-Rkzv3ZiSznYBWCGv7k2iZBghsEtq7fnHmvx6y5I7Pxhz_SJbw0Y_6PW0iky59vRbfI461C7qjaREaxs2OcUOoVvqEd1Om0SA";


kcontext.setVariable("url",urlLocal);
kcontext.setVariable("token",tok);
kcontext.setVariable("datos",datosLocal);]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:scriptTask id="_CFB1964E-6849-451F-A3BC-8A8C87959A47" name="Resultado" scriptFormat="http://www.java.com/java">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[Resultado]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_308D07E0-86BA-46A9-937D-72418EBA682A</bpmn2:incoming>
      <bpmn2:outgoing>_EF30ED44-1C2F-4464-9B5F-F20FACA14EDD</bpmn2:outgoing>
      <bpmn2:script><![CDATA[String res = (String)kcontext.getVariable("resp");

try{
String[] parts = res.split("respuestaPrincipal");

String[] parts2 = parts[1].split("\"");

kcontext.setVariable("resultados",parts2[2]);
}catch(Exception e){
kcontext.setVariable("resultados","NO");

}

/*try{
    cl.mp.rgp.flagrancia.model.Delito delitoLocal = (cl.mp.rgp.flagrancia.model.Delito) kcontext.getVariable("delito");
    String ret1= delitoLocal.getHechoDelictual();//confrLocal.getAbreviado();
    kcontext.setVariable("resultados", ret1);
}catch(Exception e){
     kcontext.setVariable("resultados", e.toString());
}*/]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:startEvent id="_B7740553-17BD-49A5-AF53-35988FEC10B0">
      <bpmn2:outgoing>_87238C3D-480C-497B-BE0F-94221F76891D</bpmn2:outgoing>
    </bpmn2:startEvent>
    <bpmn2:endEvent id="_5A79EA59-00BD-49FA-9C07-B234FB6B6985">
      <bpmn2:incoming>_EF30ED44-1C2F-4464-9B5F-F20FACA14EDD</bpmn2:incoming>
    </bpmn2:endEvent>
  </bpmn2:process>
  <bpmndi:BPMNDiagram id="_Qaze5ZA4Ee2dJv5f1f9GTg">
    <bpmndi:BPMNPlane id="_Qaze5pA4Ee2dJv5f1f9GTg" bpmnElement="RGP.GestionarConsultaFrApi">
      <bpmndi:BPMNShape id="shape__5A79EA59-00BD-49FA-9C07-B234FB6B6985" bpmnElement="_5A79EA59-00BD-49FA-9C07-B234FB6B6985">
        <dc:Bounds height="56.0" width="56.0" x="984.0" y="145.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__B7740553-17BD-49A5-AF53-35988FEC10B0" bpmnElement="_B7740553-17BD-49A5-AF53-35988FEC10B0">
        <dc:Bounds height="56.0" width="56.0" x="104.0" y="145.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__CFB1964E-6849-451F-A3BC-8A8C87959A47" bpmnElement="_CFB1964E-6849-451F-A3BC-8A8C87959A47">
        <dc:Bounds height="53.0" width="114.0" x="684.0" y="148.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__46C0D246-A9AB-4F49-A488-45793DB0A3CA" bpmnElement="_46C0D246-A9AB-4F49-A488-45793DB0A3CA">
        <dc:Bounds height="65.0" width="90.0" x="240.0" y="140.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4" bpmnElement="_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4">
        <dc:Bounds height="102.0" width="154.0" x="430.0" y="122.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="edge_shape__CFB1964E-6849-451F-A3BC-8A8C87959A47_to_shape__5A79EA59-00BD-49FA-9C07-B234FB6B6985" bpmnElement="_EF30ED44-1C2F-4464-9B5F-F20FACA14EDD">
        <di:waypoint xsi:type="dc:Point" x="741.0" y="174.5"/>
        <di:waypoint xsi:type="dc:Point" x="1012.0" y="173.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge_shape__B7740553-17BD-49A5-AF53-35988FEC10B0_to_shape__46C0D246-A9AB-4F49-A488-45793DB0A3CA" bpmnElement="_87238C3D-480C-497B-BE0F-94221F76891D">
        <di:waypoint xsi:type="dc:Point" x="160.0" y="173.0"/>
        <di:waypoint xsi:type="dc:Point" x="240.0" y="172.5"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge_shape__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4_to_shape__CFB1964E-6849-451F-A3BC-8A8C87959A47" bpmnElement="_308D07E0-86BA-46A9-937D-72418EBA682A">
        <di:waypoint xsi:type="dc:Point" x="507.0" y="173.0"/>
        <di:waypoint xsi:type="dc:Point" x="684.0" y="174.5"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge_shape__46C0D246-A9AB-4F49-A488-45793DB0A3CA_to_shape__7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4" bpmnElement="_8286B95D-C61C-4FB9-BB4F-86541A7C6FC8">
        <di:waypoint xsi:type="dc:Point" x="285.0" y="172.5"/>
        <di:waypoint xsi:type="dc:Point" x="430.0" y="173.0"/>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
  <bpmn2:relationship id="_Qaze55A4Ee2dJv5f1f9GTg" type="BPSimData">
    <bpmn2:extensionElements>
      <bpsim:BPSimData>
        <bpsim:Scenario xsi:type="bpsim:Scenario" id="default" name="Simulationscenario">
          <bpsim:ScenarioParameters xsi:type="bpsim:ScenarioParameters"/>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_B7740553-17BD-49A5-AF53-35988FEC10B0" id="_Qaze6JA4Ee2dJv5f1f9GTg">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:NormalDistribution mean="0.0" standardDeviation="0.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_CFB1964E-6849-451F-A3BC-8A8C87959A47" id="_Qaze6ZA4Ee2dJv5f1f9GTg">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:NormalDistribution mean="0.0" standardDeviation="0.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:ResourceParameters xsi:type="bpsim:ResourceParameters">
              <bpsim:Availability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Availability>
              <bpsim:Quantity xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Quantity>
            </bpsim:ResourceParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_46C0D246-A9AB-4F49-A488-45793DB0A3CA" id="_Qaze6pA4Ee2dJv5f1f9GTg">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:NormalDistribution mean="0.0" standardDeviation="0.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:ResourceParameters xsi:type="bpsim:ResourceParameters">
              <bpsim:Availability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Availability>
              <bpsim:Quantity xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Quantity>
            </bpsim:ResourceParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_7162D6A3-B14E-41F6-894D-2DC1F5D0D8D4" id="_Qaze65A4Ee2dJv5f1f9GTg">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:NormalDistribution mean="0.0" standardDeviation="0.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:ResourceParameters xsi:type="bpsim:ResourceParameters">
              <bpsim:Availability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Availability>
              <bpsim:Quantity xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Quantity>
            </bpsim:ResourceParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
        </bpsim:Scenario>
      </bpsim:BPSimData>
    </bpmn2:extensionElements>
    <bpmn2:source>_Qaze0JA4Ee2dJv5f1f9GTg</bpmn2:source>
    <bpmn2:target>_Qaze0JA4Ee2dJv5f1f9GTg</bpmn2:target>
  </bpmn2:relationship>
</bpmn2:definitions>
